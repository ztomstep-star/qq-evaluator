<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>QQ估价查询 - 精简版</title>
<style>
  :root {
    --primary: #2563eb;
    --bg: #f3f4f6;
    --card-bg: #ffffff;
    --radius: 14px;
    --shadow: 0 4px 18px rgba(0,0,0,0.05);
    --transition: all 0.25s ease;
  }
  body {
    margin: 0;
    background: var(--bg);
    font-family: "PingFang SC", "Microsoft YaHei", system-ui, sans-serif;
    color: #1f2937;
  }
  header {
    text-align: center;
    padding: 40px 16px 16px;
  }
  header h1 {
    font-size: 28px;
    margin: 0;
    background: linear-gradient(90deg, #2563eb, #60a5fa);
    -webkit-background-clip: text;
    color: transparent;
  }
  header p {
    color: #6b7280;
    margin-top: 8px;
    font-size: 14px;
  }
  .container {
    max-width: 900px;
    margin: auto;
    padding: 0 16px 50px;
  }
  .card {
    background: var(--card-bg);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 24px;
    transition: var(--transition);
  }
  .search-box {
    display: flex;
    gap: 10px;
  }
  input[type=text] {
    flex: 1;
    padding: 12px 14px;
    border-radius: var(--radius);
    border: 1px solid #d1d5db;
    font-size: 15px;
    transition: var(--transition);
  }
  input[type=text]:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
  }
  button {
    padding: 12px 16px;
    border-radius: var(--radius);
    border: none;
    background: var(--primary);
    color: #fff;
    font-size: 15px;
    cursor: pointer;
    transition: var(--transition);
  }
  button:hover {
    background: #1d4ed8;
  }
  .muted {
    color: #6b7280;
    font-size: 13px;
    margin-top: 8px;
  }
  .result {
    margin-top: 24px;
    display: none;
  }
  .profile {
    display: flex;
    gap: 16px;
    align-items: center;
  }
  .avatar {
    width: 100px;
    height: 100px;
    border-radius: 14px;
    object-fit: cover;
    border: 3px solid #e5e7eb;
  }
  .nickname {
    font-size: 20px;
    font-weight: 600;
  }
  .signature {
    color: #6b7280;
    margin-top: 4px;
  }
  .info {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-top: 16px;
  }
  .info-item {
    background: #f9fafb;
    border-radius: 10px;
    padding: 8px 12px;
    font-size: 14px;
    box-shadow: inset 0 0 0 1px #e5e7eb;
  }
  .estimate-box {
    margin-top: 16px;
    text-align: center;
    font-size: 20px;
    font-weight: 700;
    background: linear-gradient(90deg, #2563eb, #60a5fa);
    -webkit-background-clip: text;
    color: transparent;
  }
  .confidence {
    text-align: center;
    font-size: 13px;
    color: #6b7280;
  }
  .actions {
    margin-top: 14px;
    display: flex;
    justify-content: center;
    gap: 10px;
  }
  .secondary {
    background: #10b981;
  }
  footer {
    text-align: center;
    font-size: 12px;
    color: #9ca3af;
    margin-top: 20px;
  }
  @media (max-width: 700px) {
    .info { grid-template-columns: 1fr; }
    .profile { flex-direction: column; text-align: center; }
  }
</style>
</head>
<body>
  <header>
    <h1>QQ估价查询</h1>
    <p>输入QQ号即可获取资料并生成估价（演示用，不收集数据）</p>
  </header>

  <div class="container">
    <div class="card">
      <div class="search-box">
        <input id="qqInput" type="text" placeholder="请输入 QQ 号 (例如 12345678)" />
        <button id="btnSearch">查询</button>
      </div>
      <div class="muted" id="msg"></div>

      <div class="result" id="resultArea">
        <div class="profile">
          <img id="avatar" class="avatar" />
          <div>
            <div class="nickname" id="nickname"></div>
            <div class="signature" id="signature"></div>
          </div>
        </div>

        <div class="info" id="infoList"></div>

        <div class="estimate-box" id="estimate"></div>
        <div class="confidence" id="confidence"></div>

        <div class="actions">
          <button id="btnEstimate">开始估价</button>
          <button id="btnExport" class="secondary">导出 JSON</button>
        </div>
      </div>
    </div>

    <footer>©2025 QQ估价查询演示版 | 不存储任何查询数据</footer>
  </div>

<script>
const el = {
  qqInput: document.getElementById('qqInput'),
  btnSearch: document.getElementById('btnSearch'),
  msg: document.getElementById('msg'),
  result: document.getElementById('resultArea'),
  avatar: document.getElementById('avatar'),
  nickname: document.getElementById('nickname'),
  signature: document.getElementById('signature'),
  infoList: document.getElementById('infoList'),
  estimate: document.getElementById('estimate'),
  confidence: document.getElementById('confidence'),
  btnEstimate: document.getElementById('btnEstimate'),
  btnExport: document.getElementById('btnExport')
};

// mock 生成
function mockProfile(qq){
  const seed = Number(qq.slice(-5)) || 12345;
  const rand = (m,n)=>m+(seed%1000)/1000*(n-m);
  return {
    qq,
    avatarUrl: `https://q1.qlogo.cn/g?b=qq&nk=${qq}&s=640`,
    nickname: "用户" + qq.slice(-3),
    signature: "个性签名示例 #" + seed % 999,
    filledAge: 18 + seed % 20,
    filledAddress: ["北京","上海","广州","深圳","杭州"][seed % 5],
    currentLevel: 10 + seed % 60,
    vipLevel: seed % 7,
    qqAgeYears: 3 + seed % 15,
    registrationTimeIso: new Date(Date.now() - (3+seed%15)*365*24*3600*1000).toISOString(),
    nationalRank: 10000 + seed % 900000,
    friendsCount: 50 + seed % 500,
    boundPhone: seed % 2 === 0,
    boundWechat: seed % 3 === 0
  };
}

function validateQq(q){
  return /^[1-9]\d{4,10}$/.test(q);
}

el.btnSearch.addEventListener('click', ()=>{
  const qq = el.qqInput.value.trim();
  if(!validateQq(qq)){ el.msg.textContent="请输入正确的QQ号"; return; }
  el.msg.textContent = "加载中...";
  const p = mockProfile(qq);
  showProfile(p);
  el.msg.textContent = "查询成功";
});

function showProfile(p){
  el.result.style.display = 'block';
  el.avatar.src = p.avatarUrl;
  el.nickname.textContent = p.nickname + "（QQ：" + p.qq + "）";
  el.signature.textContent = p.signature;
  el.infoList.innerHTML = `
    <div class="info-item">资料年龄：${p.filledAge}</div>
    <div class="info-item">地区：${p.filledAddress}</div>
    <div class="info-item">等级：${p.currentLevel}</div>
    <div class="info-item">会员等级：${p.vipLevel}</div>
    <div class="info-item">QQ年龄：${p.qqAgeYears}年</div>
    <div class="info-item">注册时间：${new Date(p.registrationTimeIso).toLocaleDateString()}</div>
    <div class="info-item">全国排名：${p.nationalRank}</div>
    <div class="info-item">好友数：${p.friendsCount}</div>
  `;
  window.lastProfile = p;
  el.estimate.textContent = "";
  el.confidence.textContent = "";
}

// 估价算法
el.btnEstimate.addEventListener('click', ()=>{
  const p = window.lastProfile;
  if(!p){ el.msg.textContent = "请先查询"; return; }

  const score = (p.qqAgeYears*2 + p.currentLevel + p.vipLevel*5 + p.friendsCount/50);
  const price = (score * 0.8).toFixed(2);
  const confidence = Math.min(95, 40 + score / 10).toFixed(1);

  el.estimate.textContent = `参考估价：￥${price}`;
  el.confidence.textContent = `置信度：${confidence}%`;
});

el.btnExport.addEventListener('click', ()=>{
  const p = window.lastProfile;
  if(!p) return;
  const blob = new Blob([JSON.stringify(p,null,2)], {type:"application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = `qq-${p.qq}.json`;
  a.click();
  URL.revokeObjectURL(url);
});
</script>
</body>
</html>
